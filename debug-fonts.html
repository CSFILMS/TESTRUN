<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Debug Fonts</title>
  <style>
    @font-face {
      font-family: 'IBM3270';
      src: url('fonts/3270-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    @font-face {
      font-family: 'PixelCarnageMono';
      src: url('fonts/PixelCarnageMono.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    @font-face {
      font-family: 'Crisp';
      src: url('fonts/Crisp.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    @font-face {
      font-family: 'ProggyCleanCE';
      src: url('fonts/ProggyCleanCE.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    @font-face {
      font-family: 'ProggySquare';
      src: url('fonts/ProggySquare.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
    
    body {
      background: #000;
      color: #00FF00;
      font-family: monospace;
      padding: 20px;
      font-size: 16px;
    }
    
    .debug-section {
      margin: 20px 0;
      padding: 10px;
      border: 1px solid #00FF00;
    }
    
    .debug-section h3 {
      margin: 0 0 10px 0;
      color: #66FF66;
    }
    
    .debug-section p {
      margin: 5px 0;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>Debug Fonts</h1>
  <p>Checking which fonts are actually working...</p>
  
  <div class="debug-section">
    <h3>Font Loading Test</h3>
    <p id="test-text">This text will change fonts when you press B or N</p>
    <p>Current font: <span id="current-font">monospace</span></p>
    <p>Font index: <span id="font-index">0</span></p>
  </div>
  
  <div class="debug-section">
    <h3>Console Output</h3>
    <p>Check the browser console (F12) for detailed font loading info</p>
  </div>
  
  <script>
    // Test fonts array
    const fonts = [
      { family: 'monospace', size: '18px' },
      { family: 'IBM3270', size: '18px' },
      { family: 'PixelCarnageMono', size: '18px' },
      { family: 'Crisp', size: '18px' },
      { family: 'ProggyCleanCE', size: '18px' },
      { family: 'ProggySquare', size: '18px' }
    ];
    
    let currentFontIndex = 0;
    const testText = document.getElementById('test-text');
    const currentFontSpan = document.getElementById('current-font');
    const fontIndexSpan = document.getElementById('font-index');
    
    function applyFont(index) {
      const font = fonts[index];
      testText.style.fontFamily = font.family;
      currentFontSpan.textContent = font.family;
      fontIndexSpan.textContent = index;
      console.log('Applied font:', font.family, 'at index:', index);
    }
    
    function cycleForward() {
      currentFontIndex = (currentFontIndex + 1) % fonts.length;
      applyFont(currentFontIndex);
    }
    
    function cycleBackward() {
      currentFontIndex = (currentFontIndex - 1 + fonts.length) % fonts.length;
      applyFont(currentFontIndex);
    }
    
    document.addEventListener('keydown', function(e) {
      if (e.key === 'b' || e.key === 'B') {
        e.preventDefault();
        console.log('B pressed - cycling backward');
        cycleBackward();
      } else if (e.key === 'n' || e.key === 'N') {
        e.preventDefault();
        console.log('N pressed - cycling forward');
        cycleForward();
      }
    });
    
    // Debug info
    console.log('=== FONT DEBUG INFO ===');
    console.log('Fonts array:', fonts);
    console.log('Fonts length:', fonts.length);
    console.log('Font names:', fonts.map(f => f.family));
    console.log('Current font index:', currentFontIndex);
    console.log('Press B or N to cycle through fonts');
    
    // Test each font individually
    fonts.forEach((font, index) => {
      console.log(`Font ${index}: ${font.family}`);
      // Try to create a test element with this font
      const testEl = document.createElement('div');
      testEl.style.fontFamily = font.family;
      testEl.style.position = 'absolute';
      testEl.style.left = '-9999px';
      testEl.textContent = 'Test';
      document.body.appendChild(testEl);
      
      // Check if font loaded (basic test)
      const computedFont = window.getComputedStyle(testEl).fontFamily;
      console.log(`Font ${index} computed as: ${computedFont}`);
    });
  </script>
</body>
</html>
